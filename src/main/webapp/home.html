<!DOCTYPE html>
<html lang="en">

<head>

    <style>
        td,
        th {
            text-align: left;
            min-width: 150px;
            padding: 2px;
            margin: 0 auto;
        }

    </style>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="Dashboard">
    <meta name="keyword" content="Dashboard, Bootstrap, Admin, Template, Theme, Responsive, Fluid, Retina">

    <title>LTE Failure System</title>

    <!-- Bootstrap core CSS -->
    <link href="assets/css/bootstrap.css" rel="stylesheet">
    <!--external css-->
    <link href="assets/font-awesome/css/font-awesome.css" rel="stylesheet" />
    <link rel="stylesheet" type="text/css" href="assets/css/zabuto_calendar.css">
    <link rel="stylesheet" type="text/css" href="assets/js/gritter/css/jquery.gritter.css" />
    <link rel="stylesheet" type="text/css" href="assets/lineicons/style.css">
    <link rel="stylesheet" type="text/css" href="assets/css/jee.css">

    <!-- Custom styles for this template -->
    <link href="assets/css/style.css" rel="stylesheet">
    <link href="assets/css/style-responsive.css" rel="stylesheet">

    <script src="assets/js/chart-master/Chart.js"></script>
    <script src="assets/js/functions.js"></script>

    <!--  jQuery -->
    <script type="text/javascript" src="https://code.jquery.com/jquery-1.11.3.min.js"></script>

    <!-- Isolated Version of Bootstrap, not needed if your site already uses Bootstrap -->
    <link rel="stylesheet" href="https://formden.com/static/cdn/bootstrap-iso.css" />

    <!-- Bootstrap Date-Picker Plugin -->
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.4.1/js/bootstrap-datepicker.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.4.1/css/bootstrap-datepicker3.css" />

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<script src="assets/js/modernizr-custom.js"></script>
<![endif]-->
</head>

<body onload="runFileListener1()">

    <script>
        function runFileListener1() {
            $.ajax({
                type: 'post',
                url: 'api/file/dir_watcher',
                success: function() {
                    console.log("LISTENING");
                }
            });
        }

    </script>

    <section id="container">
        <!-- **********************************************************************************************************************************************************
TOP BAR CONTENT & NOTIFICATIONS
*********************************************************************************************************************************************************** -->
        <!--header start-->
        <header class="header black-bg">
            <div class="sidebar-toggle-box">
                <div class="fa fa-bars tooltips"></div>
            </div>
            <!--logo start-->
            <a href="index.html" class="logo"><b>LTE Failure System</b></a>
            <!--logo end-->

            <div class="top-menu">
                <ul class="nav pull-right top-menu">
                    <li><a class="logout" href="assets/pages/register.html">Register</a></li>
                </ul>
            </div>
        </header>
        <!--header end-->

        <!-- **********************************************************************************************************************************************************
MAIN SIDEBAR MENU
*********************************************************************************************************************************************************** -->
        <!--sidebar start-->
        <aside>
            <div id="sidebar" class="nav-collapse ">
                <!-- sidebar menu start-->
                <ul class="sidebar-menu" id="nav-accordion">

                    <li class="mt">
                        <a class="active" href="index.html">
                            <i class="fa fa-dashboard"></i>
                            <span>Dashboard</span>
                        </a>
                    </li>
                    <!--Partition Tabs Start-->
                    <li class="sub-menu">
                        <a href="javascript:;">
                            <i class="fa fa-tasks"></i>
                            <span>Event Causes</span>
                        </a>
                        <ul class="sub">
                            <li><a href="#">IMSI (Cus Rep)</a></li>
                            <li><a href="#">Phone Model (Net Engn)</a></li>
                            <li><a href="#">Causes Code (Cus Rep)</a></li>
                        </ul>
                    </li>

                    <li class="sub-menu">
                        <a href="javascript:;">
                            <i class="fa fa-phone-square"></i>
                            <span>Call Failure</span>
                        </a>
                        <ul class="sub">
                            <li><a href="#">Failure List (Sup Engn)</a></li>
                            <li><a href="#">Top 10 IMSI (Net Engn)</a></li>
                            <li><a href="#">Affected IMSI (Sup Engn)</a></li>
                            <li><a href="#">MCC / MNC (Net Engn)</a></li>
                        </ul>
                    </li>
                    <li class="sub-menu">
                        <a href="javascript:;">
                            <i class="fa fa-bar-chart-o"></i>
                            <span>Counts</span>
                        </a>
                        <ul class="sub">
                            <li><a href="#">Phone Module (Sup Engn)</a></li>
                            <li><a href="#">IMSI (Net Engn)</a></li>
                            <li><a href="#">IMSI (Cus Rep)</a></li>
                        </ul>
                    </li>

                    <!-- <li class="sub-menu">
                        <a href="javascript:;">
                            <i class="fa fa-phone-square"></i>
                            <span>Call Failure</span>
                        </a>
                        <ul class="sub">
                            <li><a href="#">MCC / MNC (Net Engn)</a></li>

                        </ul>
                    </li>-->

                    <li class="sub-menu">
                        <a href="assets/pages/data_import.jsp">
                            <i class="	fa fa-cloud-upload"></i>
                            <span>Data Import</span>
                        </a>
                        <ul class="sub">
                            <li><a href="assets/pages/data_import.jsp">Data Import</a></li>
                        </ul>
                    </li>
                    <!--Partition Tabs End-->
                </ul>
                <!-- sidebar menu end-->
            </div>
        </aside>
        <!--sidebar end-->

        <!-- **********************************************************************************************************************************************************
MAIN CONTENT
*********************************************************************************************************************************************************** -->
        <!--main content start-->
        <section id="main-content">
            <section class="wrapper">

                <div class="row">

                    <div class="col-lg-9 main-chart">

                        <input type="date" id="fromDate" value="2013-01-01">
                        <input type="date" id="toDate" value="2014-01-01">
                        <input type="text" id="inputData" placeholder="Data Input" value="191911000336527">
                        <input type="button" value="4" onclick="userStory4()">
                        <input type="button" value="5" onclick="userStory5()">
                        <input type="button" value="7" onclick="userStory7()">
                        <input type="button" value="8" onclick="userStory8()">
                        <input type="button" value="9" onclick="userStory9()">
                        <input type="button" value="Users" onclick="users()">
                        <input type="button" value="Data Log" onclick="dataImportLogs()">

                        <!--<input type="button" value="Event Cause" onclick="eventCausePerIMSI()">-->
                        <p id='fromDateVal'></p>
                        <p id='toDateVal'></p>

                        <script>
                            var story4, story7, story9, userData, dataLogs;

                            /*//XMLHttpRequest()
                            var xmlHTTP = new XMLHttpRequest();
                            var url = "myTutorials.txt";*/

                            //Build objects by reading form data using JSON

                            function userStory4() {
                                var imsi = document.getElementById('inputData').value;
                                $("#innerText").html("");
                                $.ajax({
                                    type: 'GET',
                                    url: 'api/data/event_cause_per_imsi/' + imsi,
                                    contentType: 'application/json',
                                    dataType: 'json',
                                    success: function(aList) {
                                        story4 = aList;
                                        $("#innerText").append("<table>");
                                        $("#innerText").append("<th>" + "Cause code" + "</th>" + "<th>" + "Event ID" + "</th>");
                                        $.each(story4, function(index, value) {
                                            $("#innerText").append("<tr><td>" + value[0] + "</td><td>" + value[1] + "</td></tr>");
                                        });
                                        $("#innerText").append("</table>");
                                    }
                                });

                            }

                            function userStory5() {
                                var startDate = document.getElementById('fromDate').value;
                                var endDate = document.getElementById('toDate').value;
                                var imsi = document.getElementById('inputData').value;
                                $("#innerText").html("");
                                $.ajax({
                                    type: 'GET',
                                    url: 'api/data/specific_failure_per_period/' + startDate + '/' + endDate + '/' + imsi,
                                    contentType: 'application/json',
                                    success: function(aList) {
                                        $("#innerText").append("<table>");
                                        $("#innerText").append("<th>" + "Number of failures" + "</th>");
                                        $("#innerText").append("<tr><td>" + aList + "</td></tr>");
                                        $("#innerText").append("</table>");
                                    }
                                });
                            }

                            function userStory7() {
                                var startDate = document.getElementById('fromDate').value;
                                var endDate = document.getElementById('toDate').value;
                                $("#innerText").html("");
                                $.ajax({
                                    type: 'GET',
                                    url: 'api/data/imsi_per_period/' + startDate + '/' + endDate,
                                    contentType: 'application/json',
                                    success: function(aList) {
                                        story7 = aList;
                                        $("#innerText").append("<table>");
                                        $("#innerText").append("<th>" + "IMSI" + "</th>");
                                        $.each(story7, function(index, value) {
                                            $("#innerText").append("<tr>");
                                            $("#innerText").append("<td>" + value + "</td>");
                                            $("#innerText").append("</tr>");
                                        });
                                        $("#innerText").append("</table>");
                                    }
                                });

                            }

                            function userStory8() {
                                var startDate = document.getElementById('fromDate').value;
                                var endDate = document.getElementById('toDate').value;
                                var phoneModel = document.getElementById('inputData').value;
                                $("#innerText").empty();
                                $.ajax({
                                    type: 'GET',
                                    url: 'api/data/count_per_phone_model/' + startDate + '/' + endDate + '/' + phoneModel,
                                    contentType: 'application/json',
                                    success: function(aList) {
                                        $("#innerText").append("<table>");
                                        $("#innerText").append("<th>" + "Number of failures." + "</th>");
                                        $("#innerText").append("<tr><td>" + aList + "</td></tr>");
                                        $("#innerText").append("</table>");
                                    }
                                });
                            }

                            function userStory9() {
                                var startDate = document.getElementById('fromDate').value;
                                var endDate = document.getElementById('toDate').value;
                                $("#innerText").html("");
                                $.ajax({
                                    type: 'GET',
                                    url: 'api/data/call_data_per_period/' + startDate + '/' + endDate,
                                    contentType: 'application/json',
                                    success: function(aList) {
                                        story9 = aList;
                                        $("#innerText").append("<table>");
                                        $("#innerText").append("<th>" + "IMSI" + "</th><th>" + "Number of failures" + "</th><th>" + "Total duration" + "</th>");
                                        $.each(story9, function(index, value) {
                                            $("#innerText").append("<tr>");
                                            $("#innerText").append("<td>" + value[0] + "</td><td>" + value[1] + "</td><td>" + value[2] + "</td>");
                                            $("#innerText").append("</tr>");
                                        });
                                        $("#innerText").append("</table>");
                                    }
                                });

                            }

                            function users() {
                                $("#innerText").html("");
                                $.ajax({
                                    type: 'GET',
                                    url: 'api/data/users',
                                    contentType: 'application/json',
                                    success: function(aList) {
                                        userData = aList;
                                        $("#innerText").append("<table>");
                                        $("#innerText").append("<th>" + "Username" + "</th>" + "<th>" + "Role Type" + "</th>");
                                        $.each(userData, function(index, value) {
                                            value = JSON.stringify(value);
                                            console.log(value);
                                            $("#innerText").append("<tr><td>" + JSON.parse(value)["username"] + "</td><td>" + JSON.parse(value)["roleType"].roleType + "</td></tr>");
                                        });
                                        $("#innerText").append("</table>");
                                    }
                                });
                            }

                            function dataImportLogs() {
                                $("#innerText").html("");
                                $.ajax({
                                    type: 'GET',
                                    url: 'api/data/data_import_logs',
                                    contentType: 'application/json',
                                    success: function(aList) {
                                        dataLogs = aList;
                                        $("#innerText").append("<table>");
                                        $("#innerText").append("<th>" + "Successes" + "</th>" + "<th>" + "Fails" + "</th>");
                                        $.each(dataLogs, function(index, value) {
                                            value = JSON.stringify(value);
                                            $("#innerText").append("<tr><td>" + JSON.parse(value)["numImports"] + "</td><td>" + JSON.parse(value)["numErrors"] + "</td></tr>");
                                        });
                                        $("#innerText").append("</table>");
                                    }
                                });
                            }

                        </script>

                        <!-- <div class="row mtbox">
<div class="col-md-3 col-sm-3 col-md-offset-0 box0">
<div class="box1">

<span class="li_cloud"></span>
<h3 id = "numUploads">0</h3>
</div>
<p>This will show the number of records uploaded to the database this month.</p>
</div>
<div class="col-md-3 col-sm-3 box0">
<div class="box1">

<span class="li_fire"></span>
<h3 id = "numErrors">0</h3>
</div>
<p>This will show the number of records, uploaded this month, which contained errors.</p>
</div>
<div class="col-md-3 col-sm-3 box0">
<div class="box1">

<span class="li_search"></span>
<h3 id = "numQueries">0&lt;!&ndash; INSERT NUMBER OF DATABASE UPLOADS HERE &ndash;&gt;</h3>
</div>
<p>This will show the number of queries to the database this month.</p>
</div>
<div class="col-md-3 col-sm-3 box0">
<div class="box1">

<span class="li_data"></span>
<h3 id = "numImports">0&lt;!&ndash; INSERT NUMBER OF DATABASE UPLOADS HERE &ndash;&gt;</h3>
</div>
<p>This will show the number of successful data imports to the database this month.</p>
</div>-->

                        <!-- row mt -->

                    </div>
                    <!-- /col-lg-9 END SECTION MIDDLE -->


                    <!-- **********************************************************************************************************************************************************
RIGHT SIDEBAR CONTENT
*********************************************************************************************************************************************************** -->
                    <div class="row mtbox">

                        <div class="col-lg-12">

                            <!--<button type="button" id = "queryDrop" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
Dropdown
<span class="caret"></span>
</button>-->
                            <button type='button' id="allRecords">ALL RECORDS</button>
                            <!--<ul class="dropdown-menu">
<li><a href="#">Get All Data</a></li>
<li><a href="#">Dropdown link</a></li>
</ul>-->
                            <div class="textContainer">
                                <div class="innerTextContainer">
                                    <div id="innerText">

                                    </div>
                                </div>
                            </div>

                        </div>

                    </div>

                </div>
                <!--/row -->

                </div>
            </section>
        </section>

        <!--main content end-->
        <!--footer start-->
        <footer class="site-footer">
            <div class="text-center">
                LTE Failure System
                <a href="index.html#" class="go-top">
                    <i class="fa fa-angle-up"></i>
                </a>
            </div>
        </footer>
        <!--footer end-->
    </section>

    <!-- js placed at the end of the document so the pages load faster -->
    <script src="assets/js/jquery.js"></script>
    <script src="assets/js/jquery-1.8.3.min.js"></script>
    <script src="assets/js/bootstrap.min.js"></script>
    <script class="include" type="text/javascript" src="assets/js/jquery.dcjqaccordion.2.7.js"></script>
    <script src="assets/js/jquery.scrollTo.min.js"></script>
    <script src="assets/js/jquery.nicescroll.js" type="text/javascript"></script>
    <script src="assets/js/jquery.sparkline.js"></script>


    <!--common script for all pages-->
    <script src="assets/js/common-scripts.js"></script>

    <script type="text/javascript" src="assets/js/gritter/js/jquery.gritter.js"></script>
    <script type="text/javascript" src="assets/js/gritter-conf.js"></script>

    <!--script for this page-->
    <script src="assets/js/sparkline-chart.js"></script>
    <script src="assets/js/zabuto_calendar.js"></script>


    <script type="application/javascript">
        $(document).ready(function() {
            $("#date-popover").popover({
                html: true,
                trigger: "manual"
            });
            $("#date-popover").hide();
            $("#date-popover").click(function(e) {
                $(this).hide();
            });

            $("#my-calendar").zabuto_calendar({
                action: function() {
                    return myDateFunction(this.id, false);
                },
                action_nav: function() {
                    return myNavFunction(this.id);
                },
                ajax: {
                    url: "show_data.php?action=1",
                    modal: true
                },
                legend: [{
                        type: "text",
                        label: "Special event",
                        badge: "00"
                    },
                    {
                        type: "block",
                        label: "Regular event",
                    }
                ]
            });
        });

        function myNavFunction(id) {
            $("#date-popover").hide();
            var nav = $("#" + id).data("navigation");
            var to = $("#" + id).data("to");
            console.log('nav ' + nav + ' to: ' + to.month + '/' + to.year);
        }

    </script>


</body>

</html>
